<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="../style.css">
</head>

<body>
<header>
<p>
Prev: <a href="maths">Maths</a>,
Next: <a href="layers">Layers</a>,
Up: <a href=".">Learn</a>
</p>
</header>
<hr>
<main>
<h1>Names, associated</h1>

<p>
So far, we have worked with the basic data forms in Goat:
text and numbers.
To describe more complex things, we will need <em>compound</em> objects.
Compound objects have zero or more named "components" with corresponding code definitions.
Their usage is perhaps best demonstrated with an exercise.
Let's start with the Goat Pen below.
</p>

<textarea class="codebox"></textarea>

<p>
A simple example of a compound object is a two-dimensional coordinate,
with x- and y- components described by numbers.
In Goat we can represent such a coordinate by writing some code like the following.
</p>

<pre class="codebox">
myPoint = { .x = 2; .y = 4 };
.inspect = myPoint.y;
</pre>

<p>
As usual, I'll ask you to type the above code block into the Goat pen and run it. 
You should see the following.
</p>

<pre class="codebox-output">
4.0
</pre>


<h4>Creating compound objects</h4> 

<p>
The right hand side of the <code>myPoint</code> assignment is a <em>compound object</em>,
declared using "block" syntax.
This object defines "components" <code>.x</code> and <code>.y</code> representing the point's x- and y- co-ordinates.
The following diagram of the first line highlights the block syntax for "declaring" a compound object.
</p>
<pre class="diagram">
1 | myPoint = <span class="li1">{</span> <span class="li2">.x = 2</span><span class="li3">;</span> <span class="li2">.y = 4</span> <span class="li1">}</span>;
              <span class="li1">^</span> <!--           --><!---->      <span class="li3">^</span> <!--           --><!---->       <span class="li1">^</span>
              <span class="li1">1</span> <span class="li2">^^^^^^</span><span class="li3">3</span> <span class="li2">^^^^^^</span> <span class="li1">1</span>
              <!--           --><!---->  <span class="li2">2</span>     <!--          --><!---->  <span class="li2">2</span>
</pre>
<ol class="diagram">
<li>
Block declarations start with an <strong>open brace</strong> <code>{</code> and end with a <strong>close brace</strong> <code>}</code>.
As usual, spaces immediately before and after are ignored.
</li>
<li>
The declaration involves a sequence of assignments in the manner we have been writing our programs so far.
We have prefixed the defined names with <code>.</code> to designate that they represent "components",
allowing access from code outside the block as discussed in the next section.
</li>
<li>
As usual, assignments are terminated by a <code>;</code>,
and terminating the last definition of a block is optional.
</li>
</ol>

<h4>Using compound objects</h4>

<p>
In definition of <code>inspect</code> on the second line of our program,
we see how to access a component of a compound object â€“
<code>myPoint</code> (representing the declared object) is followed by the same <code>.y</code> syntax used in the definition.
We have seen this evaluates to the number given in the corresponding definition, 4.
In Goat, names defined within a block as components (using the <code>.</code> prefix) are able to be accessed in this manner.
</p>


<h4>Missing names</h4>

<p>
It is an error to access a name that is not defined as a component.
To see this let's modify our program above so that we instead access a component <code>.z</code> on <code>myPoint</code>.
Make the following change to the second line of our program in the Goat pen above.
</p>
<pre class="codebox">
.inspect = myPoint.z;
</pre>
<p>
After running, you should see the following printed below the box.
</p>
<pre class="codebox-output">
&lt;error: Missing component: z&gt;
</pre>
</main>
<hr>
<footer>
<p>
Prev: <a href="maths">Maths</a>,
Next: <a href="layers">Layers</a>,
Up: <a href=".">Learn</a>
</p>
</footer>

<script src="../script/setup-goat-web.js"></script>
<script src="../script/goat-web.js"></script>
</body>
</html>
