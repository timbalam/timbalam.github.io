<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="../style.css">
</head>

<body>
<header>
<p>
Prev: <a href="shadows">Shadows</a>,
Next: <a href="future">Future</a>,
Up: <a href=".">Learn</a>
</p>
</header>
<hr>
<main>
<h1>Names, updated</h1>

<p>
In the <a href="layers">Layers</a> tutorial we set out to represent a line by a generalised point with interdependent x- and y- components.
We got as far as the following definition for <code>myLine</code>:
</p>
<pre>
myLine = { .x = 2; .y = x + 2 };
</pre>
<p>
This is close! The only thing we would need to be able to do is to adjust the value of the x-component,
and have the y-component automatically update to match.
In fact, as this tutorial will show,
Goat has exactly this feature.
We will need the following Goat Pen.
</p>
<textarea class="codebox"></textarea>

<p>
Here is some code demonstrating the Goat's ability to "update" a block' definitions.
</p>
<pre class="codebox">
myLine = { .x = 2; .y = x + 2 };
myLineAt5 = myLine{ .x = 5 };
.inspect = myLineAt5.y;
</pre>

<p>
Go ahead and try it in the Goat Pen. You should see the following.
</p>
<pre class="codebox-output">
7.0
</pre>

<h4>Component-wise update</h4>

<p>
The second line of the above program demonstrates Goat's block update syntax.
The value assigned to <code>myLine2</code> is a modified version of <code>myLine</code> that incorporating a new definition for <code>.x</code>.
Here we reproduce the line and highlight the main parts of the syntax.
</p>
<pre class="diagram">
2 | myLineAt5 = <span class="li1">myLine</span><span class="li2">{ .x = 5 }</span>;
                <span class="li1">^^^^^^</span><span class="li2"></span>
                <span class="li1">1</span>     <span class="li2">^^^^^^^^^^</span>
                <span class="li1"></span>      <span class="li2">2</span>
</pre>
<ol class="diagram">
<li>
The value to be modified comes first, here <code>myLine</code> as defined on the first line.
</li>
<li>
Directly following is a tuple or block declaration with components to be updated or added to the old value.
Here <code>.x</code> is being redefined as <code>5</code>.
As running the code shows,
the corresponding value for <code>.y</code> is also updated to 7.
</li>
</ol>

<h4>Fun with lines</h4>

<p>
We have seen that the ability to make updates allows us to reuse our generalised definition of <code>myLine</code>
to find the corresponding height of a line at any x-coordinate we choose.
</p>
</main>
<hr>
<footer>
<p>
Prev: <a href="shadows">Shadows</a>,
Next: <a href="future">Future</a>,
Up: <a href=".">Learn</a>
</p>
</footer>

<script src="../script/setup-goat-web.js"></script>
<script src="../script/goat-web.js"></script>
</body>
</html>
