<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
</head>

<body>
<h2>Updates</h2>

<p>
Up: <a href=".">Learn</a>,
Prev: <a href="shadows">Shadows</a>,
Next: <a href="future">Future</a>.
</p>

<br></br>

<h4>Names, updated</h4>

<p>
In the <a href="layers">Layers</a> tutorial we set out to represent a line by a generalised point with interdependent x- and y- components.
We got as far as the following definition for <code>myPoint</code>:
<pre>
myPoint = {.x = 2; .y = x + 2};
</pre>
This is close! The only thing we would need to be able to do is to adjust the value of the x-component,
and have the y-component automatically update to match.
In fact, as this tutorial will show,
Goat has exactly this feature.
We will need the following Goat Pen.
</p>

<textarea class="codebox" style="min-height: 100px; width: 95%"></textarea>

<p>
Here is some code demonstrating the Goat's ability to "update" a block' definitions.
</p>

<pre>
myPoint = {.x = 2; .y = x + 2};
myPoint2 = myPoint{.x = 5};
.output = myPoint2.y;
</pre>

<p>
Go ahead and try it in the Goat Pen. You should see the following.
</p>

<pre>
7.0.
</pre>

<h4>How it looks and what it means</h4>

<p>
Here we discuss the following annotated version of our program,
and highlight the new features demonstrated including the new syntax in the second line.
<p>

<pre>
1 | myPoint = {.x = 2; .y = x + 2};
               ^^^^^^
               1
2 | myPoint2 = myPoint(.x : 5);
               ^^^^^^^
               2      ^^^^^^^^
                      3
3 | .output = myPoint2.y;
</pre>

<ol>
<li><p>
The first line defines the name <code>myPoint</code> in the same manner as in the other tutorial,
with the "x" component originally set to 2.
</p></li>
<li><p>
In the second line we assign the name <code>myPoint2</code> using a new syntax that begins by the name <code>myPoint</code> referencing the definition above.
</p></li>
<li><p>
The name <code>myPoint</code> is followed directly by a tuple with a single component "x".
This juxtaposition form creates a modified versions of the first value,
adding new components and/or replacing already existing components with the corresponding definitions from the following tuple.
We describe this syntax as "updating" the first value.
In this case, <code>myPoint2</code> is a version of <code>myPoint</code> where the <code>x</code> component has been redefined to be <code>5</code> instead of <code>4</code>.
As running the code shows,
the corresponding value for the y-component is also updated,
resulting in 7.0 being printed.
</p></li>
</ol>

<h4>Fun with lines</h4>

<p>
We can see that our generalised definition of <code>myPoint</code> can really describe a line.
We can update the "x" component with a series of intervals and invoke the "y" component to find out the corresponding height of the line.
Try adjusting our code to update <code>myPoint</code> with different values of "x" in the Goat Pen!
</p>

<script src="../script/codebox.js"></script>
<script src="../script/goat-webi.js"></script>
</body>
</html>
